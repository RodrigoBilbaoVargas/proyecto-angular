import{a as ae,c as le,d as me,e as ce,f as de,g as A,i as se,j as pe,k as ue}from"./chunk-SE7NKR7L.js";import{a as J,b as p,c as K,d as Q,e as W,f as X,g as Z,h as ee,i as te,j as ie,k as ne,l as oe,m as re}from"./chunk-YTX3QKCG.js";import{a as k,b as $,c as H}from"./chunk-X67BQJKN.js";import{$ as s,B as U,C as l,F as j,G as L,M as c,N as d,O as G,P as R,Q as F,R as a,S as e,T as f,U as C,V as _,W as B,X as h,Y,Z as v,_ as V,ba as o,ca as O,da as y,j as z,ka as M,m as x,o as b,p as g,s as E}from"./chunk-EHFKGJC5.js";function _e(t,r){if(t&1){let n=h();C(0,"div",9)(1,"button",10),V("click",function(){b(n);let m=s();return g(m.onEdit())}),o(2,"\u270F\uFE0F Editar"),_(),C(3,"button",11),V("click",function(){b(n);let m=s();return g(m.onDelete())}),o(4,"\u{1F5D1}\uFE0F Eliminar"),_()()}}var T=class t{libro;edit=new E;delete=new E;authService=x(k);onEdit(){this.edit.emit(this.libro)}onDelete(){confirm(`\xBFEst\xE1s seguro de eliminar "${this.libro.titulo}"?`)&&this.delete.emit(this.libro.id)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=L({type:t,selectors:[["app-libro-card"]],inputs:{libro:"libro"},outputs:{edit:"edit",delete:"delete"},decls:15,vars:8,consts:[[1,"libro-card"],[1,"libro-image"],[3,"src","alt"],[1,"libro-content"],[1,"libro-titulo"],[1,"libro-autor"],[1,"libro-genero"],[1,"libro-anio"],[1,"libro-descripcion"],[1,"libro-actions"],[1,"btn","btn-edit",3,"click"],[1,"btn","btn-delete",3,"click"]],template:function(n,i){n&1&&(C(0,"div",0)(1,"div",1),B(2,"img",2),_(),C(3,"div",3)(4,"h3",4),o(5),_(),C(6,"p",5),o(7),_(),C(8,"p",6),o(9),_(),C(10,"p",7),o(11),_(),C(12,"p",8),o(13),_(),c(14,_e,5,0,"div",9),_()()),n&2&&(l(2),Y("src",i.libro.imagenUrl,U)("alt",i.libro.titulo),l(3),O(i.libro.titulo),l(2),y("\u{1F464} ",i.libro.autor),l(2),y("\u{1F4DA} ",i.libro.genero),l(2),y("\u{1F4C5} ",i.libro.anio),l(2),O(i.libro.descripcion),l(),d(i.authService.isLoggedIn()?14:-1))},dependencies:[M],styles:[".libro-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;overflow:hidden;box-shadow:0 4px 15px var(--shadow);transition:transform .3s ease,box-shadow .3s ease;height:100%;display:flex;flex-direction:column}.libro-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 25px var(--shadow)}.libro-image[_ngcontent-%COMP%]{width:100%;height:250px;overflow:hidden;background:var(--image-bg)}.libro-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.libro-card[_ngcontent-%COMP%]:hover   .libro-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.libro-content[_ngcontent-%COMP%]{padding:1.5rem;flex:1;display:flex;flex-direction:column}.libro-titulo[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--text);margin-bottom:.8rem}.libro-autor[_ngcontent-%COMP%], .libro-genero[_ngcontent-%COMP%], .libro-anio[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.5rem}.libro-descripcion[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.6;margin:1rem 0;flex:1;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.libro-actions[_ngcontent-%COMP%]{display:flex;gap:.8rem;margin-top:auto}.btn[_ngcontent-%COMP%]{flex:1;padding:.7rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;transition:all .3s ease}.btn-edit[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}.btn-delete[_ngcontent-%COMP%]{background:var(--danger);color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}"]})};function fe(t,r){t&1&&(a(0,"span",5),o(1,"El t\xEDtulo es requerido (m\xEDnimo 2 caracteres)"),e())}function Ce(t,r){t&1&&(a(0,"span",5),o(1,"El autor es requerido (m\xEDnimo 2 caracteres)"),e())}function ve(t,r){t&1&&(a(0,"span",5),o(1,"El g\xE9nero es requerido"),e())}function xe(t,r){t&1&&(a(0,"span",5),o(1,"A\xF1o inv\xE1lido"),e())}function he(t,r){t&1&&(a(0,"span",5),o(1,"La descripci\xF3n es requerida (m\xEDnimo 10 caracteres)"),e())}function Ee(t,r){t&1&&(a(0,"span",5),o(1,"Ingresa una URL v\xE1lida (debe empezar con http:// o https://)"),e())}var I=class t{constructor(r){this.fb=r;this.libroForm=this.fb.group({titulo:["",[p.required,p.minLength(2)]],autor:["",[p.required,p.minLength(2)]],genero:["",p.required],anio:["",[p.required,p.min(1e3),p.max(new Date().getFullYear())]],descripcion:["",[p.required,p.minLength(10)]],imagenUrl:["",[p.required,p.pattern("https?://.+")]]})}libro;submit=new E;cancel=new E;libroForm;ngOnInit(){this.libro&&this.libroForm.patchValue(this.libro)}onSubmit(){this.libroForm.valid&&this.submit.emit(this.libroForm.value)}onCancel(){this.cancel.emit()}static \u0275fac=function(n){return new(n||t)(j(oe))};static \u0275cmp=L({type:t,selectors:[["app-libro-form"]],inputs:{libro:"libro"},outputs:{submit:"submit",cancel:"cancel"},decls:64,vars:10,consts:[[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","titulo"],["type","text","id","titulo","formControlName","titulo","placeholder","Ej: Cien a\xF1os de soledad"],[1,"error"],["for","autor"],["type","text","id","autor","formControlName","autor","placeholder","Ej: Gabriel Garc\xEDa M\xE1rquez"],[1,"form-row"],["for","genero"],["id","genero","formControlName","genero"],["value",""],["value","Ficci\xF3n"],["value","No Ficci\xF3n"],["value","Ciencia Ficci\xF3n"],["value","Fantas\xEDa"],["value","Misterio"],["value","Romance"],["value","Terror"],["value","Biograf\xEDa"],["value","Historia"],["value","Poes\xEDa"],["for","anio"],["type","number","id","anio","formControlName","anio","placeholder","2024"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","4","placeholder","Describe brevemente el libro..."],["for","imagenUrl"],["type","url","id","imagenUrl","formControlName","imagenUrl","placeholder","https://ejemplo.com/imagen.jpg"],[1,"form-actions"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-submit",3,"disabled"]],template:function(n,i){if(n&1&&(a(0,"div",0)(1,"h2"),o(2),e(),a(3,"form",1),v("ngSubmit",function(){return i.onSubmit()}),a(4,"div",2)(5,"label",3),o(6,"T\xEDtulo *"),e(),f(7,"input",4),c(8,fe,2,0,"span",5),e(),a(9,"div",2)(10,"label",6),o(11,"Autor *"),e(),f(12,"input",7),c(13,Ce,2,0,"span",5),e(),a(14,"div",8)(15,"div",2)(16,"label",9),o(17,"G\xE9nero *"),e(),a(18,"select",10)(19,"option",11),o(20,"Selecciona un g\xE9nero"),e(),a(21,"option",12),o(22,"Ficci\xF3n"),e(),a(23,"option",13),o(24,"No Ficci\xF3n"),e(),a(25,"option",14),o(26,"Ciencia Ficci\xF3n"),e(),a(27,"option",15),o(28,"Fantas\xEDa"),e(),a(29,"option",16),o(30,"Misterio"),e(),a(31,"option",17),o(32,"Romance"),e(),a(33,"option",18),o(34,"Terror"),e(),a(35,"option",19),o(36,"Biograf\xEDa"),e(),a(37,"option",20),o(38,"Historia"),e(),a(39,"option",21),o(40,"Poes\xEDa"),e()(),c(41,ve,2,0,"span",5),e(),a(42,"div",2)(43,"label",22),o(44,"A\xF1o *"),e(),f(45,"input",23),c(46,xe,2,0,"span",5),e()(),a(47,"div",2)(48,"label",24),o(49,"Descripci\xF3n *"),e(),f(50,"textarea",25),c(51,he,2,0,"span",5),e(),a(52,"div",2)(53,"label",26),o(54,"URL de la Imagen *"),e(),f(55,"input",27),a(56,"small"),o(57,"Usa servicios como Imgur, Unsplash o cualquier URL p\xFAblica de imagen"),e(),c(58,Ee,2,0,"span",5),e(),a(59,"div",28)(60,"button",29),v("click",function(){return i.onCancel()}),o(61,"Cancelar"),e(),a(62,"button",30),o(63),e()()()()),n&2){let m,u,w,P,S,D;l(2),O(i.libro?"Editar Libro":"Agregar Nuevo Libro"),l(),F("formGroup",i.libroForm),l(5),d((m=i.libroForm.get("titulo"))!=null&&m.invalid&&((m=i.libroForm.get("titulo"))!=null&&m.touched)?8:-1),l(5),d((u=i.libroForm.get("autor"))!=null&&u.invalid&&((u=i.libroForm.get("autor"))!=null&&u.touched)?13:-1),l(28),d((w=i.libroForm.get("genero"))!=null&&w.invalid&&((w=i.libroForm.get("genero"))!=null&&w.touched)?41:-1),l(5),d((P=i.libroForm.get("anio"))!=null&&P.invalid&&((P=i.libroForm.get("anio"))!=null&&P.touched)?46:-1),l(5),d((S=i.libroForm.get("descripcion"))!=null&&S.invalid&&((S=i.libroForm.get("descripcion"))!=null&&S.touched)?51:-1),l(7),d((D=i.libroForm.get("imagenUrl"))!=null&&D.invalid&&((D=i.libroForm.get("imagenUrl"))!=null&&D.touched)?58:-1),l(4),F("disabled",i.libroForm.invalid),l(),y(" ",i.libro?"Actualizar":"Agregar"," Libro ")}},dependencies:[M,re,W,ie,ne,J,X,te,K,Q,ee,Z],styles:[".form-container[_ngcontent-%COMP%]{background:var(--card-bg);padding:2rem;border-radius:12px;box-shadow:0 4px 15px var(--shadow);max-width:700px;margin:2rem auto}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text);margin-bottom:2rem;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:1rem}label[_ngcontent-%COMP%]{display:block;color:var(--text);font-weight:600;margin-bottom:.5rem}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--text);font-size:1rem;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}small[_ngcontent-%COMP%]{display:block;color:var(--text-secondary);font-size:.85rem;margin-top:.3rem}.error[_ngcontent-%COMP%]{display:block;color:var(--danger);font-size:.85rem;margin-top:.3rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{flex:1;padding:.9rem;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-cancel[_ngcontent-%COMP%]{background:var(--secondary);color:var(--text)}.btn-cancel[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.8}.btn-submit[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-2px)}"]})};var N=class t{firestore=x(ae);librosCollection=ce(this.firestore,"libros");getLibros(){let r=pe(this.librosCollection,se("createdAt","desc"));return le(r,{idField:"id"})}async addLibro(r){try{return r.createdAt=new Date,{success:!0,id:(await me(this.librosCollection,r)).id}}catch(n){return{success:!1,error:n.message}}}async updateLibro(r,n){try{let i=A(this.firestore,`libros/${r}`);return await ue(i,n),{success:!0}}catch(i){return{success:!1,error:i.message}}}async deleteLibro(r){try{let n=A(this.firestore,`libros/${r}`);return await de(n),{success:!0}}catch(n){return{success:!1,error:n.message}}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var Le=(t,r)=>r.id;function Fe(t,r){if(t&1){let n=h();a(0,"button",8),v("click",function(){b(n);let m=s();return g(m.onAddNew())}),o(1," \u2795 Agregar Libro "),e()}}function ye(t,r){if(t&1){let n=h();a(0,"app-libro-form",9),v("submit",function(m){b(n);let u=s();return g(u.onSubmit(m))})("cancel",function(){b(n);let m=s();return g(m.onCancel())}),e()}if(t&2){let n=s();F("libro",n.editingLibro)}}function Me(t,r){t&1&&(a(0,"div",5)(1,"p"),o(2,"Cargando libros..."),e()())}function Oe(t,r){if(t&1){let n=h();a(0,"button",13),v("click",function(){b(n);let m=s(2);return g(m.onAddNew())}),o(1," Agregar Primer Libro "),e()}}function we(t,r){t&1&&(a(0,"p",12)(1,"a",14),o(2,"Inicia sesi\xF3n"),e(),o(3," para agregar libros "),e())}function Pe(t,r){if(t&1&&(a(0,"div",6)(1,"p",10),o(2,"\u{1F4D6}"),e(),a(3,"h2"),o(4,"No hay libros a\xFAn"),e(),a(5,"p"),o(6,"Comienza agregando tu primer libro a la biblioteca"),e(),c(7,Oe,2,0,"button",11)(8,we,4,0,"p",12),e()),t&2){let n=s();l(7),d(n.authService.isLoggedIn()?7:8)}}function Se(t,r){if(t&1){let n=h();a(0,"app-libro-card",15),v("edit",function(m){b(n);let u=s(2);return g(u.onEdit(m))})("delete",function(m){b(n);let u=s(2);return g(u.onDelete(m))}),e()}if(t&2){let n=r.$implicit;F("libro",n)}}function De(t,r){if(t&1&&(a(0,"div",7),G(1,Se,1,1,"app-libro-card",4,Le),e()),t&2){let n=s();l(),R(n.libros)}}var ge=class t{libroService=x(N);authService=x(k);libros=[];showForm=!1;editingLibro;loading=!0;ngOnInit(){this.loadLibros()}loadLibros(){this.libroService.getLibros().subscribe(r=>{this.libros=r,this.loading=!1})}onAddNew(){this.editingLibro=void 0,this.showForm=!0}onEdit(r){this.editingLibro=r,this.showForm=!0}async onSubmit(r){this.editingLibro?.id?await this.libroService.updateLibro(this.editingLibro.id,r):await this.libroService.addLibro(r),this.showForm=!1,this.editingLibro=void 0}async onDelete(r){await this.libroService.deleteLibro(r)}onCancel(){this.showForm=!1,this.editingLibro=void 0}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=L({type:t,selectors:[["app-libros"]],decls:12,vars:5,consts:[[1,"libros-container"],[1,"container"],[1,"header"],[1,"btn","btn-add"],[3,"libro"],[1,"loading"],[1,"empty-state"],[1,"libros-grid"],[1,"btn","btn-add",3,"click"],[3,"submit","cancel","libro"],[1,"empty-icon"],[1,"btn","btn-primary"],[1,"empty-login"],[1,"btn","btn-primary",3,"click"],["href","/login"],[3,"edit","delete","libro"]],template:function(n,i){n&1&&(f(0,"app-navbar"),a(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1"),o(5,"\u{1F4DA} Biblioteca"),e(),c(6,Fe,2,0,"button",3),e(),c(7,ye,1,1,"app-libro-form",4),c(8,Me,3,0,"div",5),c(9,Pe,9,1,"div",6),c(10,De,3,0,"div",7),e()(),f(11,"app-footer")),n&2&&(l(6),d(i.authService.isLoggedIn()?6:-1),l(),d(i.showForm?7:-1),l(),d(i.loading?8:-1),l(),d(!i.loading&&i.libros.length===0?9:-1),l(),d(!i.loading&&i.libros.length>0?10:-1))},dependencies:[M,$,H,T,I],styles:[".libros-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);padding:3rem 2rem;background:var(--bg)}.container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:3rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--text);font-size:2.5rem}.btn[_ngcontent-%COMP%]{padding:.9rem 1.8rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-add[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-add[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-secondary);font-size:1.2rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:var(--card-bg);border-radius:12px;box-shadow:0 4px 15px var(--shadow)}.empty-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text);margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:2rem}.empty-login[_ngcontent-%COMP%]{margin-top:1rem}.empty-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:none;font-weight:600}.empty-login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.libros-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem;margin-top:2rem}@media(max-width:768px){.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.libros-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{ge as LibrosComponent};
