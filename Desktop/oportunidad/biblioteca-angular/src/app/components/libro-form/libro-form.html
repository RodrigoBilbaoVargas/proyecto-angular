<div class="form-container">
  <h2>{{ libro ? 'Editar Libro' : 'Agregar Nuevo Libro' }}</h2>
  
  <form [formGroup]="libroForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="titulo">Título *</label>
      <input 
        type="text" 
        id="titulo" 
        formControlName="titulo" 
        placeholder="Ej: Cien años de soledad"
      />
      @if (libroForm.get('titulo')?.invalid && libroForm.get('titulo')?.touched) {
        <span class="error">El título es requerido (mínimo 2 caracteres)</span>
      }
    </div>

    <div class="form-group">
      <label for="autor">Autor *</label>
      <input 
        type="text" 
        id="autor" 
        formControlName="autor" 
        placeholder="Ej: Gabriel García Márquez"
      />
      @if (libroForm.get('autor')?.invalid && libroForm.get('autor')?.touched) {
        <span class="error">El autor es requerido (mínimo 2 caracteres)</span>
      }
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="genero">Género *</label>
        <select id="genero" formControlName="genero">
          <option value="">Selecciona un género</option>
          <option value="Ficción">Ficción</option>
          <option value="No Ficción">No Ficción</option>
          <option value="Ciencia Ficción">Ciencia Ficción</option>
          <option value="Fantasía">Fantasía</option>
          <option value="Misterio">Misterio</option>
          <option value="Romance">Romance</option>
          <option value="Terror">Terror</option>
          <option value="Biografía">Biografía</option>
          <option value="Historia">Historia</option>
          <option value="Poesía">Poesía</option>
        </select>
        @if (libroForm.get('genero')?.invalid && libroForm.get('genero')?.touched) {
          <span class="error">El género es requerido</span>
        }
      </div>

      <div class="form-group">
        <label for="anio">Año *</label>
        <input 
          type="number" 
          id="anio" 
          formControlName="anio" 
          placeholder="2024"
        />
        @if (libroForm.get('anio')?.invalid && libroForm.get('anio')?.touched) {
          <span class="error">Año inválido</span>
        }
      </div>
    </div>

    <div class="form-group">
      <label for="descripcion">Descripción *</label>
      <textarea 
        id="descripcion" 
        formControlName="descripcion" 
        rows="4"
        placeholder="Describe brevemente el libro..."
      ></textarea>
      @if (libroForm.get('descripcion')?.invalid && libroForm.get('descripcion')?.touched) {
        <span class="error">La descripción es requerida (mínimo 10 caracteres)</span>
      }
    </div>

    <div class="form-group">
      <label for="imagenUrl">URL de la Imagen *</label>
      <input 
        type="url" 
        id="imagenUrl" 
        formControlName="imagenUrl" 
        placeholder="https://ejemplo.com/imagen.jpg"
      />
      <small>Usa servicios como Imgur, Unsplash o cualquier URL pública de imagen</small>
      @if (libroForm.get('imagenUrl')?.invalid && libroForm.get('imagenUrl')?.touched) {
        <span class="error">Ingresa una URL válida (debe empezar con http:// o https://)</span>
      }
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-cancel" (click)="onCancel()">Cancelar</button>
      <button type="submit" class="btn btn-submit" [disabled]="libroForm.invalid">
        {{ libro ? 'Actualizar' : 'Agregar' }} Libro
      </button>
    </div>
  </form>
</div>