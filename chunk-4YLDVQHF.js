import{a as O,b as p,c as w,d as E,e as L,g as k,h as N,l as D,m as T}from"./chunk-YTX3QKCG.js";import{a as F,b as P,c as S}from"./chunk-X67BQJKN.js";import{$ as v,C as l,G as b,M as d,N as c,Q as f,R as t,S as n,T as s,Z as C,ba as o,ca as _,ka as h,m as g,na as x,oa as M,ra as y}from"./chunk-EHFKGJC5.js";function I(e,r){if(e&1&&(t(0,"div",3),o(1),n()),e&2){let a=v();l(),_(a.errorMessage)}}function R(e,r){e&1&&(t(0,"span",8),o(1,"Email inv\xE1lido"),n())}function V(e,r){e&1&&(t(0,"span",8),o(1,"M\xEDnimo 6 caracteres"),n())}function q(e,r){e&1&&o(0," Iniciando sesi\xF3n... ")}function A(e,r){e&1&&o(0," Iniciar Sesi\xF3n ")}var G=class e{authService=g(F);router=g(x);fb=g(D);loginForm;loading=!1;errorMessage="";constructor(){this.loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}async onSubmit(){if(this.loginForm.valid){this.loading=!0,this.errorMessage="";let{email:r,password:a}=this.loginForm.value;(await this.authService.login(r,a)).success?this.router.navigate(["/libros"]):this.errorMessage="Credenciales incorrectas. Verifica tu email y contrase\xF1a.",this.loading=!1}}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=b({type:e,selectors:[["app-login"]],decls:27,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-subtitle"],[1,"alert","alert-error"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],[1,"error"],["for","password"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"auth-footer"],["routerLink","/register"]],template:function(a,i){if(a&1&&(s(0,"app-navbar"),t(1,"div",0)(2,"div",1)(3,"h2"),o(4,"Iniciar Sesi\xF3n"),n(),t(5,"p",2),o(6,"Accede a tu biblioteca digital"),n(),d(7,I,2,1,"div",3),t(8,"form",4),C("ngSubmit",function(){return i.onSubmit()}),t(9,"div",5)(10,"label",6),o(11,"Email"),n(),s(12,"input",7),d(13,R,2,0,"span",8),n(),t(14,"div",5)(15,"label",9),o(16,"Contrase\xF1a"),n(),s(17,"input",10),d(18,V,2,0,"span",8),n(),t(19,"button",11),d(20,q,1,0)(21,A,1,0),n()(),t(22,"p",12),o(23," \xBFNo tienes cuenta? "),t(24,"a",13),o(25,"Reg\xEDstrate aqu\xED"),n()()()(),s(26,"app-footer")),a&2){let m,u;l(7),c(i.errorMessage?7:-1),l(),f("formGroup",i.loginForm),l(5),c((m=i.loginForm.get("email"))!=null&&m.invalid&&((m=i.loginForm.get("email"))!=null&&m.touched)?13:-1),l(5),c((u=i.loginForm.get("password"))!=null&&u.invalid&&((u=i.loginForm.get("password"))!=null&&u.touched)?18:-1),l(),f("disabled",i.loginForm.invalid||i.loading),l(),c(i.loading?20:21)}},dependencies:[h,y,M,T,L,O,w,E,N,k,P,S],styles:[".auth-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);display:flex;justify-content:center;align-items:center;padding:2rem;background:var(--bg)}.auth-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:3rem;border-radius:12px;box-shadow:0 4px 20px var(--shadow);width:100%;max-width:450px}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text);text-align:center;margin-bottom:.5rem}.auth-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);text-align:center;margin-bottom:2rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1.5rem;text-align:center}.alert-error[_ngcontent-%COMP%]{background:#ef44441a;color:var(--danger);border:1px solid var(--danger)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;color:var(--text);font-weight:600;margin-bottom:.5rem}input[_ngcontent-%COMP%]{width:100%;padding:.9rem;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--text);font-size:1rem;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.error[_ngcontent-%COMP%]{display:block;color:var(--danger);font-size:.85rem;margin-top:.3rem}.btn[_ngcontent-%COMP%]{padding:1rem;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-block[_ngcontent-%COMP%]{width:100%}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;color:var(--text-secondary)}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:none;font-weight:600}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{G as LoginComponent};
