import{a as S,b as c,c as O,d as R,e as k,g as N,h as T,l as D,m as G}from"./chunk-YTX3QKCG.js";import{a as y,b as F,c as E}from"./chunk-X67BQJKN.js";import{$ as b,C as s,G as h,M as l,N as m,Q as C,R as n,S as r,T as d,Z as _,ba as o,ca as v,ka as x,m as f,na as M,oa as w,ra as P}from"./chunk-EHFKGJC5.js";function q(e,i){if(e&1&&(n(0,"div",3),o(1),r()),e&2){let a=b();s(),v(a.errorMessage)}}function I(e,i){if(e&1&&(n(0,"div",4),o(1),r()),e&2){let a=b();s(),v(a.successMessage)}}function L(e,i){e&1&&(n(0,"span",9),o(1,"Email inv\xE1lido"),r())}function A(e,i){e&1&&(n(0,"span",9),o(1,"M\xEDnimo 6 caracteres"),r())}function B(e,i){e&1&&(n(0,"span",9),o(1,"Las contrase\xF1as no coinciden"),r())}function j(e,i){e&1&&o(0," Registrando... ")}function z(e,i){e&1&&o(0," Registrarse ")}var V=class e{authService=f(y);router=f(M);fb=f(D);registerForm;loading=!1;errorMessage="";successMessage="";constructor(){this.registerForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required]},{validators:this.passwordMatchValidator})}passwordMatchValidator(i){let a=i.get("password"),t=i.get("confirmPassword");return a&&t&&a.value!==t.value?(t.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}async onSubmit(){if(this.registerForm.valid){this.loading=!0,this.errorMessage="",this.successMessage="";let{email:i,password:a}=this.registerForm.value;(await this.authService.register(i,a)).success?(this.successMessage="\xA1Registro exitoso! Redirigiendo...",setTimeout(()=>{this.router.navigate(["/libros"])},1500)):this.errorMessage="Error al registrar. El email ya puede estar en uso.",this.loading=!1}}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["app-register"]],decls:33,vars:8,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-subtitle"],[1,"alert","alert-error"],[1,"alert","alert-success"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","tu@email.com"],[1,"error"],["for","password"],["type","password","id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"auth-footer"],["routerLink","/login"]],template:function(a,t){if(a&1&&(d(0,"app-navbar"),n(1,"div",0)(2,"div",1)(3,"h2"),o(4,"Crear Cuenta"),r(),n(5,"p",2),o(6,"\xDAnete a BiblioTech"),r(),l(7,q,2,1,"div",3),l(8,I,2,1,"div",4),n(9,"form",5),_("ngSubmit",function(){return t.onSubmit()}),n(10,"div",6)(11,"label",7),o(12,"Email"),r(),d(13,"input",8),l(14,L,2,0,"span",9),r(),n(15,"div",6)(16,"label",10),o(17,"Contrase\xF1a"),r(),d(18,"input",11),l(19,A,2,0,"span",9),r(),n(20,"div",6)(21,"label",12),o(22,"Confirmar Contrase\xF1a"),r(),d(23,"input",13),l(24,B,2,0,"span",9),r(),n(25,"button",14),l(26,j,1,0)(27,z,1,0),r()(),n(28,"p",15),o(29," \xBFYa tienes cuenta? "),n(30,"a",16),o(31,"Inicia sesi\xF3n aqu\xED"),r()()()(),d(32,"app-footer")),a&2){let u,p,g;s(7),m(t.errorMessage?7:-1),s(),m(t.successMessage?8:-1),s(),C("formGroup",t.registerForm),s(5),m((u=t.registerForm.get("email"))!=null&&u.invalid&&((u=t.registerForm.get("email"))!=null&&u.touched)?14:-1),s(5),m((p=t.registerForm.get("password"))!=null&&p.invalid&&((p=t.registerForm.get("password"))!=null&&p.touched)?19:-1),s(5),m((g=t.registerForm.get("confirmPassword"))!=null&&g.hasError("passwordMismatch")&&((g=t.registerForm.get("confirmPassword"))!=null&&g.touched)?24:-1),s(),C("disabled",t.registerForm.invalid||t.loading),s(),m(t.loading?26:27)}},dependencies:[x,P,w,G,k,S,O,R,T,N,F,E],styles:[".auth-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);display:flex;justify-content:center;align-items:center;padding:2rem;background:var(--bg)}.auth-card[_ngcontent-%COMP%]{background:var(--card-bg);padding:3rem;border-radius:12px;box-shadow:0 4px 20px var(--shadow);width:100%;max-width:450px}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text);text-align:center;margin-bottom:.5rem}.auth-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);text-align:center;margin-bottom:2rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1.5rem;text-align:center}.alert-error[_ngcontent-%COMP%]{background:#ef44441a;color:var(--danger);border:1px solid var(--danger)}.alert-success[_ngcontent-%COMP%]{background:#22c55e1a;color:#22c55e;border:1px solid #22c55e}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;color:var(--text);font-weight:600;margin-bottom:.5rem}input[_ngcontent-%COMP%]{width:100%;padding:.9rem;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--text);font-size:1rem;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.error[_ngcontent-%COMP%]{display:block;color:var(--danger);font-size:.85rem;margin-top:.3rem}.btn[_ngcontent-%COMP%]{padding:1rem;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-block[_ngcontent-%COMP%]{width:100%}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;color:var(--text-secondary)}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);text-decoration:none;font-weight:600}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{V as RegisterComponent};
